(this.webpackJsonpmemcrab=this.webpackJsonpmemcrab||[]).push([[0],{21:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(0),c=n.n(o),a=n(7),u=n.n(a),i=(n(21),n(4)),l=n(2),s=(n(28),n(3)),d=(n(29),"closest/CREATE__CLOSEST"),b=n(15),m=n(6),j="table/SET_TABLE",f="table/ADD_ONE",h="table/DELETE_ROW",O="table/ADD_ROW",p=function(t,e){return{type:f,payload:{cellId:t,cellAmount:e}}},v=function(t){return t.table},w=function(t){return t.closestQuantity},x=Object(i.b)({table:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return e.payload;case f:return t.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{rowArr:t.rowArr.map((function(t){return t.id!==e.payload.cellId?t:Object(m.a)(Object(m.a)({},t),{},{amount:e.payload.cellAmount+1})}))})}));case h:return t.filter((function(t){return t.id!==e.payload}));case O:return[].concat(Object(b.a)(t),[e.payload]);default:return t}},closestQuantity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return e.payload;default:return t}}});var y=c.a.memo((function(){var t=function(t){for(var e=[],n=0;n<t[0].rowArr.length;++n){for(var r=0,o=0;o<t.length;++o)r+=t[o].rowArr[n].amount;e.push({id:Math.random(),amount:Math.round(r/t.length)})}return e}(Object(l.c)(v));return Object(r.jsx)("tr",{children:t.map((function(t){return Object(r.jsx)("th",{className:"row__th",children:t.amount},t.id)}))})})),_=n(14),A=n.n(_),g=(n(30),function(t){var e=t.rowArr,n=t.rowId,c=t.setClosestArr,a=t.closestArr,u=Object(l.b)(),i=Object(l.c)(v),d=Object(l.c)(w),b=Object(o.useState)(!1),m=Object(s.a)(b,2),j=m[0],f=m[1],O=Object(o.useState)(0),x=Object(s.a)(O,2),y=x[0],_=x[1],g=e.reduce((function(t,e){return t+e.amount}),0),M=function(t,e){var n=i.map((function(e){return e.rowArr.map((function(e){return{id:e.id,amount:Math.abs(e.amount-t)}}))})).flat().filter((function(t){return t.id!==e})).sort((function(t,e){return t.amount-e.amount})).slice(0,d);c(n)};return Object(o.useEffect)((function(){var t=0;i.forEach((function(e){var n=e.rowArr.reduce((function(t,e){return t+e.amount}),0);t+=n})),_(Math.round(g/t*100))}),[g,i]),Object(r.jsxs)(r.Fragment,{children:[e.map((function(t){return Object(r.jsx)("td",{className:A()("row__td",{row__td_closest:a.find((function(e){return e.id===t.id}))}),onClick:function(){u(p(t.id,t.amount))},onKeyDown:function(e){"Enter"===e.key&&u(p(t.id,t.amount))},onMouseOver:function(){return M(t.amount,t.id)},onFocus:function(){return M(t.amount,t.id)},onMouseLeave:function(){return c([])},role:"button",children:t.amount},t.id)})),Object(r.jsx)("th",{className:"row__th",style:{background:j?"linear-gradient(to bottom, #d3d3d3 ".concat(100-y,"%, #f00 ").concat(100-y,"% ").concat(y,"%)"):"#d3d3d3"},onMouseOver:function(){return f(!0)},onFocus:function(){return f(!0)},onMouseLeave:function(){return f(!1)},onBlur:function(){return f(!1)},children:j?"".concat(y,"%"):g}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{className:"row__delete-button",type:"button",onClick:function(){u(function(t){return{type:h,payload:t}}(n))},children:"X"})})]})}),M=function(){var t=Object(o.useState)([]),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(l.c)(v);return Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("tbody",{children:a.map((function(t){return Object(r.jsx)("tr",{children:Object(r.jsx)(g,{rowArr:t.rowArr,rowId:t.id,setClosestArr:c,closestArr:n})},t.id)}))}),Object(r.jsx)("tfoot",{children:Object(r.jsx)(y,{})})]})},N=(n(31),function(){var t=Object(o.useState)(""),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(o.useState)(""),u=Object(s.a)(a,2),i=u[0],b=u[1],m=Object(o.useState)(""),f=Object(s.a)(m,2),h=f[0],O=f[1],p=Object(l.b)();return Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p({type:d,payload:+h}),p(function(t,e){for(var n=[],r=0;r<+t;++r){for(var o={id:Math.random(),rowArr:[]},c=0;c<+e;++c){var a={id:Math.random(),amount:Math.floor(1e3*Math.random())};o.rowArr.push(a)}n.push(o)}return{type:j,payload:n}}(n,i))},children:[Object(r.jsx)("label",{className:"form__label",htmlFor:"rows",children:"Rows:"}),Object(r.jsx)("input",{className:"form__input",type:"number",min:"1",max:"20",placeholder:"1-20",value:n,id:"rows",required:!0,onChange:function(t){return c(t.target.value)}}),Object(r.jsx)("label",{className:"form__label",htmlFor:"columns",children:"Columns:"}),Object(r.jsx)("input",{className:"form__input",type:"number",min:"1",max:"20",placeholder:"1-20",value:i,id:"columns",required:!0,onChange:function(t){return b(t.target.value)}}),Object(r.jsx)("label",{className:"form__label",htmlFor:"closestAmount",children:"Closest amount:"}),Object(r.jsx)("input",{className:"form__input",type:"number",min:"1",max:n*i-1,value:h,id:"closestAmount",required:!0,onChange:function(t){return O(t.target.value)}}),Object(r.jsx)("button",{className:"form__submit-button",type:"submit",children:"Submit"})]})});var E=function(){var t=Object(l.c)(v),e=Object(l.b)();return Object(r.jsxs)("div",{className:"App",children:[!t.length>0&&Object(r.jsx)(N,{}),t.length>0&&Object(r.jsx)(M,{}),t.length>0&&t.length<20&&Object(r.jsx)("button",{className:"add-row",type:"button",onClick:function(){return e(function(t){for(var e={id:Math.random(),rowArr:[]},n=0;n<+t;++n){var r={id:Math.random(),amount:Math.floor(1e3*Math.random())};e.rowArr.push(r)}return{type:O,payload:e}}(t[0].rowArr.length))},children:"Add row"})]})},C=Object(i.c)(x);u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(l.a,{store:C,children:Object(r.jsx)(E,{})})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6a28ecbf.chunk.js.map